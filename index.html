<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Piano tile game</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
        <div class="container">
        <button class="btn" id=0 ></button>
        <button class="btn" id=1 ></button>
        <button class="btn" id=2 ></button>
        <button class="btn" id=3 ></button>
        <button class="btn" id=4 ></button>
        <button class="btn" id=5 ></button>
        <button class="btn" id=6 ></button>
        <button class="btn" id=7 ></button>
        <button class="btn" id=8 ></button>
        <button class="btn" id=9 ></button>
        <button class="btn" id=10 ></button>
        <button class="btn" id=11 ></button>
        <button class="btn" id=12 ></button>
        <button class="btn" id=13 ></button>
        <button class="btn" id=14 ></button>
        <button class="btn" id=15 ></button>

    </div>
</body>
<script>

    let ran_arr=[];
    let buttonPressed = [];


    function tilegen(){
        let ran = Math.floor(Math.random() * (16));
        ran_arr.push(ran)
        console.log(ran_arr)
        glow(ran_arr)
    }


    function glow(ran_arr) {
        console.log("inside newround")
        for (let i = 0; i < ran_arr.length; i++) {
            // console.log("loops start")
            let myId = document.getElementById(ran_arr[i]);
            myId.classList.remove('new')

            let elem = myId;
            setTimeout(() => {
                elem.classList.add('new');
            }, 100)
            // console.log("loop ends")
            // myId.classList.add('new');
        }
        click()
    }
     function click() {
        let selectedButton;
        console.log("inside click")
        for (let i = 0; i < 16; i++) {
            selectedButton = document.querySelectorAll(".btn")[i];
            selectedButton.addEventListener('click', fun)

        }
        function fun(){
                let chosenButton = this.getAttribute("id");
                buttonPressed.push(chosenButton);
                console.log("clicked")
                console.log(buttonPressed);

                if(ran_arr.length===buttonPressed.length){
                    console.log("going to check ans")
                    checkans()
                }
                else{
                    selectedButton.removeEventListener('click',fun);
                    click()
                }
    }}
    function checkans(){
        const result = ran_arr.every(element =>{
            return buttonPressed.includes(element.toString());
            });
        console.log(ran_arr,buttonPressed)
        console.log(result)
        // if(result){
        //     console.log("yah");
        //     buttonPressed.pop()
        //     newRound()
        // }

        if(ran_arr.length === buttonPressed.length){
            if(result){
                console.log("yah")
                for (let i = 0; i < buttonPressed.length; i++) {
                    buttonPressed.pop();
                }
                tilegen();
            }
            else{
                console.log("nah")
            }
        }
        else{
            click()
        }


    }





    tilegen()






</script>
</html>